<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Inverse probability or odds weighting-based transportability analysis • TransportHealth</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Inverse probability or odds weighting-based transportability analysis">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">TransportHealth</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.2.2</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Introduction</h6></li>
    <li><a class="dropdown-item" href="../articles/overview.html">Overview of transportability and generalizability analyses and TransportHealth</a></li>
    <li><a class="dropdown-item" href="../articles/assumptions.html">Assumptions of transportability and generalizability analysis</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Inverse probability methods</h6></li>
    <li><a class="dropdown-item" href="../articles/transportIP.html">Inverse probability or odds weighting-based transportability analysis</a></li>
    <li><a class="dropdown-item" href="../articles/transportIPMath.html">Theory of inverse probability or odds weighting</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>G-computation</h6></li>
    <li><a class="dropdown-item" href="../articles/transportGC.html">G-computation-based transportability analysis</a></li>
    <li><a class="dropdown-item" href="../articles/transportGCMath.html">Theory of g-computation</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/CoreClinicalSciences/TransportHealth"><span class="fa fa-github"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Inverse probability or odds weighting-based transportability analysis</h1>
                        <h4 data-toc-skip class="author">Core Clinical
Sciences</h4>
            
      

      <div class="d-none name"><code>transportIP.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>In this vignette, we demonstrate how to use
<code>TransportHealth</code> for weighting-based transportability
analysis for instances where mergeable individual participant-level data
(IPD) are available in both the original study and target sample.</p>
<div class="section level3">
<h3 id="brief-introduction-to-iopw-and-ippw">Brief Introduction to IOPW and IPPW<a class="anchor" aria-label="anchor" href="#brief-introduction-to-iopw-and-ippw"></a>
</h3>
<p>For transportability scenarios, where the original study population
is a separate population to the target population of interest, we can
use the
<code>inverse odds of participation weighting (IOPW)</code>approach.</p>
<p>When the original study population is a subset of the target
population of interest, we refer to this as generalizability scenarios;
here, we can use the
<code>inverse probability of participation weighting (IPPW)</code>
approach.</p>
<p>Both the IOPW and IPPW approaches are analogous to the propensity
score weighting approach, such as
<code>inverse probability of treatment weighting (IPTW)</code>, that
aims to adjust for confounding typically present in a non-randomized
study. These methods are analogous in the sense we can use a model such
as logistic regression to estimate the probability of interest (i.e,
probability of study participation or propensity to being treated).
Under the transportability analysis framework, the results from the
original study are weighted based on the inverse odds or inverse
probability (for transportability and generalizability, respectively)
that is calculated based on differing distributions of effect modifiers
between the original study and target sample data. The weights refer to
the conditional probability of participation in the target study.</p>
</div>
</div>
<div class="section level2">
<h2 id="example">Example<a class="anchor" aria-label="anchor" href="#example"></a>
</h2>
<p>Suppose we are interested in estimating the causal effect of a
medication on systolic blood pressure in a target population, but we
were only able to conduct an observational study using samples from the
study population. To obtain unbiased causal effect estimates using the
study sample, we account for the following covariates: sex, body fat
percentage, and stress level.</p>
<p>We know that the effectiveness of the medication depends on two
effect modifiers: 1) stress level, and 2) whether patients are taking
another medication.</p>
<p><em>Note that the covariates adjusted for in the study data can also
be effect modifiers.</em></p>
<div class="section level3">
<h3 id="coded-variables">Coded variables<a class="anchor" aria-label="anchor" href="#coded-variables"></a>
</h3>
<ul>
<li>
<p>Medication - <code>med1</code></p>
<ul>
<li>
<code>1</code> for treated</li>
<li>
<code>0</code> for untreated</li>
</ul>
</li>
<li><p>Systolic blood pressure (SBP) - <code>sysBloodPressure</code>
(continuous)</p></li>
<li>
<p>Sex - <code>sex</code></p>
<ul>
<li>
<code>1</code> for male</li>
<li>
<code>0</code> for female</li>
</ul>
</li>
<li><p>Body fat percentage - <code>percentBodyFat</code>
(continuous)</p></li>
<li>
<p>Stress level - <code>stress</code></p>
<ul>
<li>
<code>1</code> for stressed</li>
<li>
<code>0</code> for normal</li>
</ul>
</li>
<li>
<p>Medication 2 - <code>med2</code></p>
<ul>
<li>
<code>1</code> for treated</li>
<li>
<code>0</code> for untreated</li>
</ul>
</li>
</ul>
</div>
<div class="section level3">
<h3 id="analyses">Analyses<a class="anchor" aria-label="anchor" href="#analyses"></a>
</h3>
<p>We can perform this analysis as follows.</p>
<p>First, the data from the study and target population may be two
separate data frames or a single merged data frame in the <code>R</code>
environment.</p>
<ul>
<li><p>If they are separate, put them together in a <code>list</code>
object; there is no need to name the components, as the package will
identify the study data as the dataset with response and treatment
information. Because of this, make sure that the study data has the
response and treatment columns, while the target data does not (which is
the case 99% of the time). If they are merged, make sure that</p></li>
<li><p>The response and treatment column values for the target data are
<code>NA</code>, and;</p></li>
<li><p>There is a binary variable indicating which observations are in
the study data and the target data, with participation being coded as
<code>1</code> or <code>TRUE</code>.</p></li>
</ul>
<!-- This is not clear. Do they need to add two variables one for study data and one for target data and then label them? Or do they just need one variable, and if so, which dataset should that variable reference (e.g., "study data" or "target data"?  --><p>Suppose that we have the study and target data separately as
follows.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">testData</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "studyData"  "targetData"</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="st">"Study data:"</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "Study data:"</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">testData</span><span class="op">$</span><span class="va">studyData</span><span class="op">)</span></span>
<span><span class="co">#&gt;   sysBloodPressure med1 sex stress med2 percentBodyFat</span></span>
<span><span class="co">#&gt; 1         109.4347    1   1      0    0       16.84868</span></span>
<span><span class="co">#&gt; 2         115.9803    0   1      1    0       14.48698</span></span>
<span><span class="co">#&gt; 3         112.7886    0   1      0    0       15.53636</span></span>
<span><span class="co">#&gt; 4         107.6026    1   1      0    0       13.76442</span></span>
<span><span class="co">#&gt; 5         120.6845    0   0      1    0       30.08657</span></span>
<span><span class="co">#&gt; 6         113.4424    0   1      0    0       16.23256</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="st">"Target data:"</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "Target data:"</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">testData</span><span class="op">$</span><span class="va">targetData</span><span class="op">)</span></span>
<span><span class="co">#&gt;   sex stress med2 percentBodyFat</span></span>
<span><span class="co">#&gt; 1   0      1    0       26.12896</span></span>
<span><span class="co">#&gt; 2   1      1    0       12.04972</span></span>
<span><span class="co">#&gt; 3   1      1    0       12.55972</span></span>
<span><span class="co">#&gt; 4   0      0    1       27.07130</span></span>
<span><span class="co">#&gt; 5   1      1    0       11.85846</span></span>
<span><span class="co">#&gt; 6   0      1    0       27.64520</span></span></code></pre></div>
<p>After merging the data, we can now perform transportability analysis
based on the IOPW approach using the <code>transportIP</code>
function.</p>
<!-- Quang, insert blank function here -->
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/transportIP.html">transportIP</a></span><span class="op">(</span><span class="va">msmFormula</span>,</span>
<span>            <span class="va">propensityScoreModel</span>,</span>
<span>            <span class="va">participationModel</span>,</span>
<span>            <span class="va">propensityWeights</span>,</span>
<span>            <span class="va">participationWeights</span>,</span>
<span>            <span class="va">treatment</span>,</span>
<span>            <span class="va">participation</span>,</span>
<span>            <span class="va">response</span>,</span>
<span>            <span class="va">family</span>,</span>
<span>            <span class="va">method</span>,</span>
<span>            <span class="va">data</span>,</span>
<span>            <span class="va">transport</span>,</span>
<span>            <span class="va">bootstrapNum</span><span class="op">)</span></span></code></pre></div>
<div class="section level4">
<h4 id="arguments-for-the-transportip-function">Arguments for the <code>transportIP</code> function<a class="anchor" aria-label="anchor" href="#arguments-for-the-transportip-function"></a>
</h4>
<p>This function requires specification of the following arguments:</p>
<ul>
<li><p><code>msmFormula</code>: A formula expressing the marginal
structural model (MSM) to be fit.</p></li>
<li><p><code>propensityScoreModel</code>: A formula or a
<code>glm</code> object expressing the propensity model, i.e. a model of
treatment assignment in terms of covariates.</p></li>
</ul>
<p>If a formula is provided, logistic regression is used by default.
Custom propensity weights from other weighting methods can also be
provided to the <code>customPropensity</code> argument instead; in this
case, do not set <code>propensityScoreModel</code> because it is
<code>NULL</code> by default and will be overridden.</p>
<ul>
<li>
<code>participationModel</code>: A formula or a <code>glm</code>
object expressing the participation model, i.e. a model of study
participation in terms of effect modifiers.</li>
</ul>
<p>If a formula is provided, logistic regression is used by default.
Custom participation weights from other weighting methods can also be
provided to the <code>customParticipation</code> argument instead; in
this case, do not set <code>participationModel</code> because it is
<code>NULL</code> by default and will be overridden.</p>
<ul>
<li>
<code>family</code>: The type of MSM to be fit.</li>
</ul>
<p>This can be any of the families that are used in <code>glm</code>,
one of <code>"coxph"</code>,<code>"survreg"</code> or
<code>"polr"</code>. The <code>"coxph"</code> and <code>"survreg"</code>
options are for survival analysis and will use default options of these
methods from the <code>survival</code> package. The <code>"polr"</code>
option is for ordinal outcomes, and the link function can be specified
by the <code>method</code> argument, which uses the logistic link by
default.</p>
<ul>
<li><p><code>data</code>: The study and target data, separate or
merged</p></li>
<li><p><code>transport</code>: This argument can be used to specify
whether a transportability or generalizability analysis will be
performed.</p></li>
</ul>
<p>By default (<code>transport = true</code>), transportability based on
IOPW is used.</p>
<p>Generalizability analysis weighs by IPPW instead of than IOPW.</p>
</div>
<div class="section level4">
<h4 id="specification-of-transportability-analysis">Specification of transportability analysis<a class="anchor" aria-label="anchor" href="#specification-of-transportability-analysis"></a>
</h4>
<p>These components are put together as follows.</p>
<p>Recall that: - <code>sysBloodPressure</code> is the response</p>
<ul>
<li><p><code>med1</code> is the treatment</p></li>
<li><p><code>sex</code>, <code>percentBodyFat</code>, and
<code>stress</code> are covariates to be controlled in the original
study</p></li>
<li><p><code>med2</code> (other medication) and <code>stress</code> are
effect modifiers of interest.</p></li>
</ul>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu">TransportHealth</span><span class="fu">::</span><span class="fu"><a href="../reference/transportIP.html">transportIP</a></span><span class="op">(</span></span>
<span>  <span class="co"># MSM formula</span></span>
<span>  msmFormula <span class="op">=</span> <span class="va">sysBloodPressure</span> <span class="op">~</span> <span class="va">med1</span>, </span>
<span>  </span>
<span>  <span class="co"># Propensity model</span></span>
<span>  propensityScoreModel <span class="op">=</span> <span class="va">med1</span> <span class="op">~</span> <span class="va">sex</span> <span class="op">+</span> <span class="va">percentBodyFat</span> <span class="op">+</span> <span class="va">stress</span>, </span>
<span>  </span>
<span>  <span class="co"># Participation model</span></span>
<span>  participationModel <span class="op">=</span> <span class="va">participation</span> <span class="op">~</span> <span class="va">stress</span> <span class="op">+</span> <span class="va">med2</span>, </span>
<span>  </span>
<span>  <span class="co"># Type of MSM</span></span>
<span>  family <span class="op">=</span> <span class="va">gaussian</span>, </span>
<span>  </span>
<span>  <span class="co"># Data frame</span></span>
<span>  data <span class="op">=</span> <span class="va">testData</span>, </span>
<span>  </span>
<span>  <span class="co"># Transportability or generalizability specification argument</span></span>
<span>  transport <span class="op">=</span> <span class="cn">T</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="producing-statistical-results">Producing statistical results<a class="anchor" aria-label="anchor" href="#producing-statistical-results"></a>
</h4>
<p>To show the results of the analysis, we can use the
<code><a href="https://rdrr.io/r/base/summary.html" class="external-link">base::summary</a></code> function, similar to how one would use the
<code>lm</code> function for fitting a linear model.</p>
<p>This prints out covariate balance tables pre- and post-weighting for
covariates between treatment groups (using propensity weights only) and
effect modifiers (using participation weights only) between original
study and target data, as well as a summary output of the MSM model fit
with the correct standard errors calculated using bootstrapping.</p>
<p>For the effect modifiers balance table, the weights used are inverse
odds for study data and 1 for target data in a transportability
analysis, and inverse probability for all observations in a
generalizability analysis.</p>
<p>Note that if custom participation weights are provided, the balance
tables default to transportability analysis since only the weights for
observations in the study data are provided.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">base</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">result</span><span class="op">)</span></span>
<span><span class="co">#&gt; Absolute SMDs of covariates between treatments before and after weighting:</span></span>
<span><span class="co">#&gt;                       variable          smd   method</span></span>
<span><span class="co">#&gt; sex                        sex 1.686088e-01 Observed</span></span>
<span><span class="co">#&gt; percentBodyFat  percentBodyFat 1.723317e-01 Observed</span></span>
<span><span class="co">#&gt; stress                  stress 6.216350e-02 Observed</span></span>
<span><span class="co">#&gt; sex1                       sex 3.734792e-05 Weighted</span></span>
<span><span class="co">#&gt; percentBodyFat1 percentBodyFat 1.162362e-03 Weighted</span></span>
<span><span class="co">#&gt; stress1                 stress 3.198184e-03 Weighted</span></span>
<span><span class="co">#&gt; Absolute SMDs of effect modifiers between study and target populations before and after weighting:</span></span>
<span><span class="co">#&gt;         variable          smd   method</span></span>
<span><span class="co">#&gt; stress    stress 0.6813098772 Observed</span></span>
<span><span class="co">#&gt; med2        med2 0.4965440683 Observed</span></span>
<span><span class="co">#&gt; stress1   stress 0.0001348323 Weighted</span></span>
<span><span class="co">#&gt; med21       med2 0.0002726495 Weighted</span></span>
<span><span class="co">#&gt; MSM results:</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Call:</span></span>
<span><span class="co">#&gt; stats::glm(formula = msmFormula, family = family, data = toAnalyze, </span></span>
<span><span class="co">#&gt;     weights = finalWeights)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Coefficients:</span></span>
<span><span class="co">#&gt;             Estimate Std. Error t value Pr(&gt;|t|)    </span></span>
<span><span class="co">#&gt; (Intercept)  116.715      0.169  690.31  &lt; 2e-16 ***</span></span>
<span><span class="co">#&gt; med11         -1.771      0.497   -3.56  0.00039 ***</span></span>
<span><span class="co">#&gt; ---</span></span>
<span><span class="co">#&gt; Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; (Dispersion parameter for gaussian family taken to be 69.24548)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     Null deviance: 71451  on 999  degrees of freedom</span></span>
<span><span class="co">#&gt; Residual deviance: 69107  on 998  degrees of freedom</span></span>
<span><span class="co">#&gt; AIC: 6333</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Number of Fisher Scoring iterations: 2</span></span></code></pre></div>
<p>The <code>transportIP</code> object produced by the
<code>transportIP</code> function contains the model fitting objects for
the propensity model, the participation model and the MSM. You can use
methods like <code>coef</code> and <code>residuals</code> on these
objects themselves. This is not implemented by the package because they
are not as useful as implementing <code>summary</code>.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">msmResiduals</span> <span class="op">&lt;-</span> <span class="fu">stats</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/stats/residuals.html" class="external-link">residuals</a></span><span class="op">(</span><span class="va">result</span><span class="op">$</span><span class="va">msm</span><span class="op">)</span></span>
<span></span>
<span><span class="va">msmCoefficients</span> <span class="op">&lt;-</span> <span class="fu">stats</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/stats/coef.html" class="external-link">coef</a></span><span class="op">(</span><span class="va">result</span><span class="op">$</span><span class="va">msm</span><span class="op">)</span></span></code></pre></div>
<p><strong>Positivity</strong> and <strong>conditional
exchangeability</strong> are two key assumptions that can affect the
validity of transportability analysis.</p>
<p><code>Positivity</code> is the assumption that at all observed levels
of covariates and effect modifiers, the probability of being in the
treatment group and being in the study are neither 0 nor 1,
respectively.</p>
<ul>
<li>To evaluate this assumption for the treatment assignment and study
participation, use the <code>plot</code> function with
<code>type = "propensityHist"</code> or
<code>type = "participationHist"</code>, respectively. This outputs
mirrored histograms of probabilities of being in the treatment group for
different treatment groups or of participating in the study for the
study and target data, respectively. Non-overlap of the ranges of the
histograms suggest violations of the positivity assumption <span class="citation">(Wizard, n.d.b)</span>.</li>
</ul>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">base</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/base/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">result</span>, type <span class="op">=</span> <span class="st">"propensityHist"</span><span class="op">)</span></span></code></pre></div>
<p><img src="transportIP_files/figure-html/IPWeighting-hist-1.png" width="700"></p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="fu">base</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/base/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">result</span>, type <span class="op">=</span> <span class="st">"participationHist"</span><span class="op">)</span></span></code></pre></div>
<p><img src="transportIP_files/figure-html/IPWeighting-hist-2.png" width="700"></p>
<p><code>Conditional exchangeability</code> is roughly the assumption
that the only possible confounding is due to the controlled covariates
and effect modifiers. Under this assumption, IOPW estimates will be
reliable if the weighted distributions of covariates and effect
modifiers are similar between treatment groups, and between the study
and target data. This can be (partially) evaluated using standardized
mean differences (SMDs), which are shown in table form by the
<code>summary</code> function. The <code>plot</code> function with
<code>type = "propensitySMD"</code> or
<code>type = "participationSMD"</code> provides graphical versions of
these tables. A general guideline is that an SMD of below 0.1 indicates
balance, but this threshold is arbitrary and left to the choice of the
analyst <span class="citation">(Wizard, n.d.a)</span>.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">base</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/base/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">result</span>, type <span class="op">=</span> <span class="st">"propensitySMD"</span><span class="op">)</span></span></code></pre></div>
<p><img src="transportIP_files/figure-html/IPWeighting-smd-1.png" width="700"></p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="fu">base</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/base/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">result</span>, type <span class="op">=</span> <span class="st">"participationSMD"</span><span class="op">)</span></span></code></pre></div>
<p><img src="transportIP_files/figure-html/IPWeighting-smd-2.png" width="700"></p>
<p>Model coefficient plots showing confidence intervals of the effect
estimates are provided by <code>plot</code> function with
<code>type = "msm"</code>. The standard errors are the correct ones
calculated by bootstrap.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">base</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/base/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">result</span>, type <span class="op">=</span> <span class="st">"msm"</span><span class="op">)</span></span></code></pre></div>
<p><img src="transportIP_files/figure-html/IPWeighting-msm-1.png" width="700"></p>
<p>Note that as all plot outputs are designed to be generated with
<code>ggplot2</code>, they can be customized further.</p>
</div>
</div>
<div class="section level3">
<h3 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a>
</h3>
<div id="refs" class="references csl-bib-body hanging-indent" entry-spacing="0">
<div id="ref-balance" class="csl-entry">
Wizard, Causal. n.d.a. <span>“Covariate Balance.”</span> <a href="https://causalwizard.app/inference/article/covariate-balance" class="external-link">https://causalwizard.app/inference/article/covariate-balance</a>.
</div>
<div id="ref-positivity" class="csl-entry">
———. n.d.b. <span>“The Positivity Assumption.”</span> <a href="https://causalwizard.app/inference/article/positivity" class="external-link">https://causalwizard.app/inference/article/positivity</a>.
</div>
</div>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Core Clinical Sciences, Quang Vuong.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
